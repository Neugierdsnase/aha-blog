---
import SidePanelToggleButton from "./SidePanelToggleButton.astro";
---

<aside
  class="fixed top-0 -translate-x-full w-3/4 min-h-screen desktop:static desktop:col-start-1 desktop:left-auto desktop:top-auto desktop:col-end-4 desktop:w-full transition-[left] focus-within:left-0 z-10"
>
  <div class='size-full'>
    <slot />
  </div>
  <div class="right-0 top-[calc(50vh-24px)] absolute flex justify-center items-center p-0">
    <SidePanelToggleButton className="size-12" htmlId="side-panel-toggle" />
  </div>
</aside>

<script>
  import { animate } from "animejs";

  let isOpen = false;

  const toggle = document.querySelector("#side-panel-toggle");
  toggle.addEventListener("click", () => {
    if (isOpen) {
      animate("aside", {
        transform: "translateX(0%)",
        duration: 300,
        ease: "inOutExpo",
      });
    } else {
      animate("aside", {
        transform: "translateX(100%)",
        duration: 300,
        ease: "inOutExpo",
      });
    }
    isOpen = !isOpen;
  });
</script>
