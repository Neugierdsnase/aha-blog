---
import BaseHead from "../components/BaseHead.astro";
import Article from "../components/Article.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import { getCollection } from "astro:content";

const FEATURED_POST_TITLE = "Cluburlaub, Türkei, 2025";

const featuredPost = (await getCollection("blog")).find(
  ({ data }) => data.title === FEATURED_POST_TITLE,
);

const { Content } = featuredPost
  ? await featuredPost.render()
  : { Content: () => null };
---

<!doctype html>
<html lang="de-AT">
  <BaseHead
    title="Konstantini Pagina Domestica"
    description={SITE_DESCRIPTION}
  />

  <body>
    <div
      id="body"
      class="size-screen max-h-screen min-h-screen overflow-hidden grid grid-rows-[65vh_120px_calc(35vh-120px)] grid-cols-1 desktop:grid-cols-[480px_120px_1fr]"
    >
      <aside
        class="h-full row-start-3 py-22 desktop:row-start-auto bg-cherry-blossom-pink text-raisin-black text-[clamp(2rem,7svw,3.4rem)] desktop:h-screen flex justify-center items-center"
      >
        <div class="relative w-fit tablet:-translate-y-8 cursor-default px-8">
          <p class="hidden tablet:block text-5xl font-decorative">{SITE_TITLE}</p>
          <p
            class="hidden desktop:block italic desktop:border-b text-[max(1.6rem,1svh)]"
          >
            {SITE_DESCRIPTION}
          </p>
          <nav
            class="flex flex-col-reverse -translate-y-12 tablet:translate-y-0 tablet:flex-row desktop:flex-col justify-between gap-2 tablet:gap-4 desktop:gap-8 desktop:mt-12 w-full"
          >
            <a
              class="block text-center w-full text-sm desktop:text-md mx-auto desktop:border-raisin-black border-1 rounded py-2 px-8 cursor-pointer hover:bg-raisin-black hover:text-lavender-blush transition-colors duration-300"
              href="/blog">Jüngst&nbsp;geschrieben</a
            >
            <a
              class="block text-center w-full text-sm desktop:text-md mx-auto desktop:border-raisin-black border-1 rounded py-2 px-8 cursor-pointer hover:bg-raisin-black hover:text-lavender-blush transition-colors duration-300"
              href="/book">Jüngst&nbsp;gelesen</a
            >
          </nav>
          <p class="relative tablet:hidden text-md text-center bottom-8">von {SITE_TITLE}</p>
        </div>
      </aside>

      <div
        class="row-start-2 desktop:row-start-auto desktop:block desktop:h-screen size-full home-screen-gradient"
      >
      </div>

      <main
        class="row-start-1 w-full desktop:row-start-auto mx-auto desktop:col-start-3 bg-background h-full desktop:h-screen desktop:max-h-screen overflow-hidden"
      >
        <div class="mx-auto max-h-4/5 overflow-hidden mask-b-from-45">
          <Article title={featuredPost?.data.title ?? ""}>
            <Content />
          </Article>
        </div>
        <a
          href={"/blog/" + featuredPost?.slug}
          class="block mt-8 text-center text-md w-fit mx-auto border-foreground border-1 rounded py-2 px-8 cursor-pointer hover:bg-foreground hover:text-background transition-colors duration-300"
          >weiterlesen...</a
        >
      </main>
    </div>
  </body>
</html>
